<local:ScopedWindow xmlns:local="clr-namespace:AutofacEnhancedWpfDemo.Views"
                    x:Class="AutofacEnhancedWpfDemo.Views.CustomersWindow"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    Title="Customers Management"
                    Width="800" Height="600"
                    WindowStartupLocation="CenterScreen"
                    Background="#F8F9FA">

	<local:ScopedWindow.Resources>
		<!-- Reuse styles from ProductsWindow -->
		<Style x:Key="ModernButton" TargetType="Button">
			<Setter Property="Padding" Value="16,10"/>
			<Setter Property="Margin" Value="0,0,10,0"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="Medium"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Background" Value="#3B82F6"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
							<ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#2563EB"/>
				</Trigger>
				<Trigger Property="IsEnabled" Value="False">
					<Setter Property="Background" Value="#CBD5E1"/>
					<Setter Property="Cursor" Value="Arrow"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
			<Setter Property="Background" Value="#6B7280"/>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#4B5563"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
			<Setter Property="Background" Value="#EF4444"/>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#DC2626"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<Style TargetType="DataGrid">
			<Setter Property="Background" Value="White"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="GridLinesVisibility" Value="None"/>
			<Setter Property="HeadersVisibility" Value="Column"/>
			<Setter Property="AutoGenerateColumns" Value="False"/>
			<Setter Property="CanUserAddRows" Value="False"/>
			<Setter Property="CanUserDeleteRows" Value="False"/>
			<Setter Property="SelectionMode" Value="Single"/>
			<Setter Property="RowHeight" Value="48"/>
			<Setter Property="FontSize" Value="14"/>
		</Style>

		<Style TargetType="DataGridColumnHeader">
			<Setter Property="Background" Value="#F1F5F9"/>
			<Setter Property="Foreground" Value="#334155"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Padding" Value="16,12"/>
			<Setter Property="BorderThickness" Value="0,0,0,1"/>
			<Setter Property="BorderBrush" Value="#E2E8F0"/>
		</Style>

		<Style TargetType="DataGridRow">
			<Setter Property="Background" Value="White"/>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#F8FAFC"/>
				</Trigger>
				<Trigger Property="IsSelected" Value="True">
					<Setter Property="Background" Value="#DBEAFE"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<Style TargetType="DataGridCell">
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Padding" Value="16,0"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="DataGridCell">
						<Border Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
							<ContentPresenter VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</local:ScopedWindow.Resources>

	<Grid Margin="24">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Header -->
		<StackPanel Grid.Row="0" Margin="0,0,0,24">
			<TextBlock Text="ðŸ‘¥ Customers Management"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="#1E293B"/>
			<TextBlock Text="Manage your customer database"
                       FontSize="14"
                       Foreground="#64748B"
                       Margin="0,4,0,0"/>
		</StackPanel>

		<!-- Toolbar -->
		<Border Grid.Row="1"
                Background="White"
                CornerRadius="8"
                Padding="16"
                Margin="0,0,0,16">
			<Border.Effect>
				<DropShadowEffect Color="#000000" Opacity="0.05" BlurRadius="10" ShadowDepth="0"/>
			</Border.Effect>
			<StackPanel Orientation="Horizontal">
				<Button Content="âž• Add Customer"
                        Command="{Binding AddCustomerCommand}"
                        Style="{StaticResource ModernButton}"/>
				<Button Content="âœï¸ Edit Selected"
                        Command="{Binding EditCustomerCommand}"
                        Style="{StaticResource SecondaryButton}"/>
				<Button Content="ðŸ—‘ï¸ Delete Selected"
                        Command="{Binding DeleteCustomerCommand}"
                        Style="{StaticResource DangerButton}"/>
				<Button Content="ðŸ”„ Refresh"
                        Command="{Binding LoadCustomersCommand}"
                        Style="{StaticResource SecondaryButton}"/>
			</StackPanel>
		</Border>

		<!-- Data Grid -->
		<Border Grid.Row="2"
                Background="White"
                CornerRadius="8"
                Padding="0">
			<Border.Effect>
				<DropShadowEffect Color="#000000" Opacity="0.05" BlurRadius="10" ShadowDepth="0"/>
			</Border.Effect>
			<DataGrid ItemsSource="{Binding Customers}"
                      SelectedItem="{Binding SelectedCustomer}">
				<DataGrid.Columns>
					<DataGridTextColumn Header="ID"
                                        Binding="{Binding Id}"
                                        Width="80"/>
					<DataGridTextColumn Header="Customer Name"
                                        Binding="{Binding Name}"
                                        Width="*"/>
					<DataGridTextColumn Header="Email Address"
                                        Binding="{Binding Email}"
                                        Width="300"/>
				</DataGrid.Columns>
			</DataGrid>
		</Border>

		<!-- Status Bar -->
		<Border Grid.Row="3"
                Margin="0,16,0,0">
			<StackPanel>
				<TextBlock Text="â³ Loading..."
                           Foreground="#3B82F6"
                           FontSize="14"
                           Visibility="{Binding IsBusy, Converter={StaticResource BoolToVisibilityConverter}}"/>

				<TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#EF4444"
                           FontSize="14"
                           TextWrapping="Wrap"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource NullToVisibilityConverter}}"/>

				<TextBlock Foreground="#64748B"
                           FontSize="14">
					<Run Text="Total Customers:"/>
					<Run Text="{Binding Customers.Count, Mode=OneWay}" FontWeight="SemiBold"/>
				</TextBlock>
			</StackPanel>
		</Border>
	</Grid>
</local:ScopedWindow>